@page "/users/adduser"
@inject IUserService Users

<h3>Add user</h3>

<input @bind="username" placeholder="Username" />
<input @bind="password" placeholder="Password" type="password" />
<button @onclick="AddUserAsync">AddUser</button>

<p style="color:red">@error</p>
<p style="color:green">@ok</p>

@code {
    string username = "";
    string password = "";
    string? error;
    string? ok;

    async Task AddUserAsync()
    {
        error = ok = null;
        try
        {
            var dto = await Users.AddUserAsync(new ApiContracts.Users.CreateUserDto {
                UserName = username,
                Password = password
            });
            ok = $"Added user #{dto.Id} ({dto.UserName})";
        }
        catch (Exception ex) { error = ex.Message; }
    }
}
